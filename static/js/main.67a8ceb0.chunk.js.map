{"version":3,"sources":["features/player/player_walk.png","config/constants.js","features/map/index.js","features/player/reducer.js","features/map/reducer.js","config/store.js","features/player/index.js","features/player/movement.js","data/maps/1/index.js","features/world/index.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","SPRITE_SIZE","MAP_HEIGHT","MAP_WIDTH","MapTile","props","react_default","a","createElement","className","concat","type","getTileSprite","tile","style","height","width","MapRow","tiles","map","connect","state","position","left","top","border","margin","row","initialState","spriteLocation","walkIndex","direction","playerReducer","arguments","length","undefined","action","Object","objectSpread","payload","rootReducer","combineReducers","player","mapReducer","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","dispatchMove","newPos","getState","getWalkIndex","dispatch","getSpriteLocation","attemptMove","oldPos","getNewPosition","observeBoundaries","y","x","observeImpassable","addEventListener","eve","preventDefault","keyCode","console","log","handleKeyDown","handleMovement","backgroundImage","walkSprite","backgroundPosition","World","features_player","App","world","Component","ReactDOM","render","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.67a8ceb0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/player_walk.9f19440f.png\";","export const SPRITE_SIZE = 40\nexport const MAP_HEIGHT = SPRITE_SIZE * 10\nexport const MAP_WIDTH = SPRITE_SIZE * 20","import React from 'react'\nimport { SPRITE_SIZE } from '../../config/constants'\nimport { connect } from 'react-redux'\n\nimport './styles.css'\n\nfunction getTileSprite(type) {\n  switch(type) {\n    default:\n    case 0:\n      return 'grass'\n    case 3:\n      return 'tree'\n    case 4:\n      return 'chest'\n    case 5:\n      return 'rock'\n    case 6:\n      return 'tree'\n  }\n}\n\nfunction MapTile(props) {\n  return <div \n      className={`tile ${getTileSprite(props.tile)}`}\n      style={{\n        height: SPRITE_SIZE,\n        width: SPRITE_SIZE,\n      }}\n    >&nbsp;</div>\n}\n\nfunction MapRow(props) {\n  return props.tiles.map( tile => <MapTile tile={tile} /> )\n}\n\nfunction Map(props) {\n  return (\n    <div \n      style={{\n        position: 'relative',\n        left: '0',\n        top: '0',\n        width: '800px',\n        height: '480px',\n        border: '5px solid white',\n        margin: '10px auto',\n      }}\n    >\n      {\n        props.tiles.map( row => <MapRow tiles={row} /> )\n      }\n    </div>\n  )\n}\n\nfunction mapToStateToProps(state) {\n  return {\n    tiles: state.map.tiles,\n  }\n}\n\nexport default connect(mapToStateToProps)(Map)","const initialState = {\n  position: [0, 0],\n  spriteLocation: '0px 0px',\n  walkIndex: 0,\n  direction: 'EAST',\n}\n\nconst playerReducer = (state=initialState, action) => {\n  switch(action.type) {\n    case 'MOVE_PLAYER':\n      return {\n        ...action.payload\n      }\n    default:\n      return state\n  }\n}\n\nexport default playerReducer","const initialState = {\n  tiles: [],\n}\n\nconst playerReducer = (state=initialState, action) => {\n  switch(action.type) {\n    case 'ADD_TILES':\n      return {\n        ...action.payload\n      }\n    default:\n      return state\n  }\n}\n\nexport default playerReducer","import { createStore, combineReducers } from 'redux'\nimport playerReducer from '../features/player/reducer'\nimport mapReducer from '../features/map/reducer'\n\nconst rootReducer = combineReducers({\n  player: playerReducer,\n  map: mapReducer,\n})\n\nconst store = createStore(\n  rootReducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\n)\n\nexport default store","import React from 'react'\nimport { connect } from 'react-redux'\nimport walkSprite from './player_walk.png'\nimport handleMovement from './movement'\n\nfunction Player(props) {\n  return (\n    <div style={{\n      position: 'absolute',\n      top: props.position[1],\n      left: props.position[0],\n      backgroundImage: `url('${walkSprite}')`,\n      backgroundPosition: props.spriteLocation,\n      width: '40px',\n      height: '40px',\n    }}></div>\n    )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.player,\n  }\n}\n\nexport default connect(mapStateToProps)(handleMovement(Player))","import store from '../../config/store'\nimport { SPRITE_SIZE, MAP_WIDTH, MAP_HEIGHT } from '../../config/constants'\n\nexport default function handMovement(player) {\n\n  function getNewPosition(oldPos, direction) {\n    switch(direction) {\n      default:\n      case 'WEST':\n        return [ oldPos[0] - SPRITE_SIZE, oldPos[1] ]\n      case 'EAST':\n        return [ oldPos[0] + SPRITE_SIZE, oldPos[1] ]\n      case 'NORTH':\n        return [ oldPos[0], oldPos[1] - SPRITE_SIZE ]\n      case 'SOUTH':\n        return [ oldPos[0], oldPos[1] + SPRITE_SIZE ]\n    }\n  }\n\n  function getSpriteLocation(direction, walkIndex) {\n    switch(direction) {\n      default:\n      case 'SOUTH':\n        return `${SPRITE_SIZE*walkIndex}px ${SPRITE_SIZE*0}px`;\n      case 'EAST':\n        return `${SPRITE_SIZE*walkIndex}px ${SPRITE_SIZE*1}px`;\n      case 'WEST':\n        return `${SPRITE_SIZE*walkIndex}px ${SPRITE_SIZE*2}px`;\n      case 'NORTH':\n        return `${SPRITE_SIZE*walkIndex}px ${SPRITE_SIZE*3}px`;\n    }\n  }\n\n  function getWalkIndex() {\n    const walkIndex = store.getState().player.walkIndex\n    return walkIndex >= 7 ? 0 : walkIndex + 1\n  }\n  \n  function observeBoundaries(oldPos, newPos) {\n    return (newPos[0] >= 0 && newPos[0] <= (MAP_WIDTH - SPRITE_SIZE)) && \n           (newPos[1] >= 0 && newPos[1] <= (MAP_HEIGHT - SPRITE_SIZE))\n  }\n\n  function observeImpassable(oldPos, newPos) {\n    const tiles = store.getState().map.tiles\n    const y = newPos[1] / SPRITE_SIZE\n    const x = newPos[0] / SPRITE_SIZE\n    const nextTile = tiles[y][x]\n    return nextTile < 5\n  }\n\n  function dispatchMove(direction, newPos) {\n    const walkIndex = getWalkIndex()\n    \n    store.dispatch({\n      type: 'MOVE_PLAYER',\n      payload: {\n        position: newPos,\n        direction,\n        walkIndex,\n        spriteLocation: getSpriteLocation(direction, walkIndex),\n      }\n    })\n  }\n\n  function attemptMove(direction) {\n    const oldPos = store.getState().player.position\n    const newPos = getNewPosition(oldPos, direction)\n\n    if (observeBoundaries(oldPos, newPos) && observeImpassable(oldPos, newPos)) {\n      dispatchMove(direction, newPos)\n    }\n  }\n\n  function handleKeyDown(eve) {\n    eve.preventDefault()\n\n    switch(eve.keyCode) {\n      case 37:\n        return attemptMove('WEST');\n      case 38:\n        return attemptMove('NORTH');\n      case 39:\n        return attemptMove('EAST');\n      case 40:\n        return attemptMove('SOUTH');\n      default:\n        console.log(eve.keyCode);\n    }\n  }\n\n  window.addEventListener('keydown', (eve) => {\n    handleKeyDown(eve)\n  })\n\n  return player\n}","export const tiles = [\n  [0,0,6,6,6,6,6,6,6,6,5,5,6,6,6,6,6,6,6,6,],\n  [0,0,0,0,6,6,6,6,6,6,6,5,6,6,6,6,6,6,6,6,],\n  [6,6,0,0,0,6,6,6,6,6,6,5,6,0,0,0,6,6,6,6,],\n  [6,6,0,6,0,0,6,6,6,5,5,5,6,6,0,0,6,6,6,6,],\n  [6,6,6,6,0,0,6,6,0,5,5,5,0,0,0,6,6,5,6,6,],\n  [6,6,6,6,0,0,0,0,0,0,0,0,0,6,5,6,6,6,6,6,],\n  [6,6,0,0,0,0,0,0,6,0,6,6,0,5,5,6,6,6,6,6,],\n  [6,6,6,0,0,6,6,6,6,6,6,0,0,5,6,6,6,6,6,6,],\n  [6,6,6,6,6,6,6,5,5,6,6,0,0,3,3,3,0,0,6,6,],\n  [6,6,6,5,5,6,6,5,6,6,6,0,0,6,6,6,0,4,6,6,],\n  [6,6,6,6,5,6,6,6,6,6,6,0,0,6,6,6,6,6,6,6,],\n  [6,6,6,6,6,6,6,6,6,6,6,0,0,6,6,6,6,6,6,6,],\n]","import React from 'react'\nimport Map from '../map'\nimport Player from '../player'\n\nimport { tiles } from '../../data/maps/1'\nimport store from '../../config/store'\n\nfunction World(props) {\n  store.dispatch({ type: 'ADD_TILES', payload: {\n    tiles,\n  } })\n  return (\n      <div \n        style={{\n          position: 'relative',\n          width: '800px',\n          height: '400px',\n          margin: '20px auto',\n        }}\n      >\n        <Map tiles={tiles} />\n        <Player />\n      </div>\n    );\n}\n\nexport default World","import React, { Component } from 'react'\nimport World from './features/world'\n\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <World />\n      </div>\n    );\n  }\n}\n\nexport default App;","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport { Provider } from 'react-redux'\n\nimport store from './config/store'\n\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));"],"sourceRoot":""}